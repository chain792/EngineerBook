<% content_for(:title, t('.title')) %>
<div class="container pt-3">
  <div class="row">
    <% @books.each do |book| %>
      <div class="col-lg-4 col-md-6 col-12">
        <div class="card mb-3", style="height: 350px; min-width: 300px;">
          <div class="row g-0", style="height: 220px">
            <div class="col-5">
              <%= image_tag book.book_image.url, class: 'img-fluid ms-2 mt-2 border' %>
            </div>
            <div class="col-7">
              <div class="card-body">
                <h5 class="card-title"><%= book.title.truncate(30) %></h5>
                <p class="card-text mb-2"><%= book.authors.pluck(:name).join(', ')&.truncate(20) %></p>
                <p class="card-text"><small class="text-muted"><%= book.published_date %></small></p>
              </div>
            </div>
          </div>
          <div class="d-flex border-top pt-2">
            <div>
              <%= image_tag book.user.avatar.url, class: 'rounded-circle mt-1 ms-2 me-3', size: '40x40' %>
            </div>
            <div>
              <p class="fs-7 mb-1"><%= book.user.name %></p>
              <p class="card-text mb-2">
                <small class="text-muted"><%= date_ago(book.created_at) %></small>
                <span class="badge bg-secondary ms-1"><%= book.category.name %></span>
              </p>
            </div>
          </div>  
          <p class="card-text mx-3"><%= book.body.truncate(30) %></p>
          <%= link_to '', book_path(book), class: 'card-link' %>
        </div>
      </div>
    <% end %>
  </div>
</div>

